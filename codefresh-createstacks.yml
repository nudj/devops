version: '1.0'

steps:

  create_vpc:
    image: nudj/devops:aws
    working_directory: IMAGE_WORK_DIR
    description: Create the initial VPC
    commands:
      - ./scripts/create-stack.sh -s vpc -e core
      - ./scripts/create-stack.sh -s env -e development -d core-vpc -v core-vpc
      - ./scripts/create-stack.sh -s alb -e development -d development-env -v core-vpc
      - ./scripts/create-stack.sh -s ecs -e development -d development-alb -v core-vpc
      - ./scripts/create-stack.sh -s service -e development -c web -d development-ecs -v core-vpc
      # - ./scripts/create-stack.sh -s service -e development -c admin -d development-ecs -v core-vpc
      # - ./scripts/create-stack.sh -s service -e development -c hire -d development-ecs -v core-vpc
      # - ./scripts/create-stack.sh -s service -e development -c db -d development-ecs -v core-vpc
